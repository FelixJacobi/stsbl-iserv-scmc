stsbl-iserv-scmc (20.06.03-1) stable; urgency=medium

  * Added switch for iserv-server-nginx
  * KernelControllerSubscriber: Fixed messing up original request

 -- Felix Jacobi <Felix@jacobi-hamburg.net>  Wed, 03 Jun 2020 03:44:54 +0200

stsbl-iserv-scmc (19.11.01-1) stable; urgency=medium

  * Bumped copyright
  * Fixed return value on default room access mode
  * Replaced deprecated route annotation

 -- Felix Jacobi <Felix@jacobi-hamburg.net>  Fri, 01 Nov 2019 19:45:57 +0100

stsbl-iserv-scmc (19.08.08-1) experimental; urgency=medium

  * Fixed deprecations

 -- Felix Jacobi <Felix@jacobi-hamburg.net>  Thu, 08 Aug 2019 03:28:19 +0200

stsbl-iserv-scmc (19.05.09-1) experimental; urgency=medium

  * Fixed bind config to use views

 -- Felix Jacobi <Felix@jacobi-hamburg.net>  Thu, 09 May 2019 05:32:06 +0200

stsbl-iserv-scmc (19.04.03-1) experimental; urgency=medium

  * Fixed missing refactoring in AdminController

 -- Felix Jacobi <Felix@jacobi-hamburg.net>  Wed, 03 Apr 2019 01:57:50 +0200

stsbl-iserv-scmc (19.01.25-2) experimental; urgency=medium

  * Fixed more deprecations

 -- Felix Jacobi <Felix@jacobi-hamburg.net>  Fri, 25 Jan 2019 02:45:39 +0100

stsbl-iserv-scmc (19.01.25-1) experimental; urgency=medium

  * Resolved issues with Symfony 4

 -- Felix Jacobi <Felix@jacobi-hamburg.net>  Fri, 25 Jan 2019 02:23:45 +0100

stsbl-iserv-scmc (19.01.04-1) experimental; urgency=medium

  * Renamed bundle and fixed extension for webpack

 -- Felix Jacobi <Felix@jacobi-hamburg.net>  Fri, 04 Jan 2019 22:16:28 +0100

stsbl-iserv-scmc (18.11.25-1) experimental; urgency=medium

  * Adapted module structure to web application move
  * Fixed apache config for web application move

 -- Felix Jacobi <felix.jacobi@stsbl.de>  Sun, 25 Nov 2018 23:00:45 +0100

stsbl-iserv-scmc (18.09.30-1) experimental; urgency=medium

  * Rebuilt with 'webpack -p'

 -- Felix Jacobi <felix.jacobi@stsbl.de>  Sun, 30 Sep 2018 13:19:59 +0200

stsbl-iserv-scmc (18.09.12-1) experimental; urgency=medium

  * Moved to webpack
  * Updated build rules for webpack support

 -- Felix Jacobi <felix.jacobi@stsbl.de>  Wed, 12 Sep 2018 01:09:13 +0200

stsbl-iserv-scmc (18.08.04-2) experimental; urgency=medium

  * Fixed username logging with umlauts

 -- Felix Jacobi <felix.jacobi@stsbl.de>  Sat, 04 Aug 2018 16:36:30 +0200

stsbl-iserv-scmc (18.08.04-1) experimental; urgency=medium

  * Fixed server management and improved apache config generation

 -- Felix Jacobi <felix.jacobi@stsbl.de>  Sat, 04 Aug 2018 16:13:54 +0200

stsbl-iserv-scmc (18.08.02-2) experimental; urgency=medium

  * Fixed mapping
  * Fixed error pages for new asset management

 -- Felix Jacobi <felix.jacobi@stsbl.de>  Thu, 02 Aug 2018 00:54:27 +0200

stsbl-iserv-scmc (18.08.02-1) experimental; urgency=medium

  * Fixed database for new host serial id

 -- Felix Jacobi <felix.jacobi@stsbl.de>  Thu, 02 Aug 2018 00:10:27 +0200

stsbl-iserv-scmc (18.05.21-1) experimental; urgency=medium

  * Updated packaging
  * Improved validator

 -- Felix Jacobi <felix.jacobi@stsbl.de>  Mon, 21 May 2018 18:51:37 +0200

stsbl-iserv-scmc (18.03.26-2) experimental; urgency=medium

  * Fixed changelog

 -- Felix Jacobi <felix.jacobi@stsbl.de>  Mon, 26 Mar 2018 21:57:30 +0200

stsbl-iserv-scmc (18.03.26-1) experimental; urgency=medium

  * Fixed broken perl dependency and fixed PHP notice in
    KernelControllerSubscriber

 -- Felix Jacobi <felix.jacobi@stsbl.de>  Mon, 26 Mar 2018 21:56:31 +0200

stsbl-iserv-scmc (18.02.16-3) experimental; urgency=medium

  * Fixed missing description

 -- Felix Jacobi <felix.jacobi@stsbl.de>  Fri, 16 Feb 2018 21:21:37 +0100

stsbl-iserv-scmc (18.02.16-2) experimental; urgency=medium

  * Fixed install

 -- Felix Jacobi <felix.jacobi@stsbl.de>  Fri, 16 Feb 2018 21:20:45 +0100

stsbl-iserv-scmc (18.02.16-1) experimental; urgency=medium

  * Moved socket path to /run and limit Kernel controller subscriber to own url prefix
  * Updated packaging

 -- Felix Jacobi <felix.jacobi@stsbl.de>  Fri, 16 Feb 2018 21:19:22 +0100

stsbl-iserv-scmc (18.02.04-2) experimental; urgency=medium

  * Added workaround for lintian bug

 -- Felix Jacobi <felix.jacobi@stsbl.de>  Sun, 04 Feb 2018 16:48:40 +0100

stsbl-iserv-scmc (18.02.04-1) experimental; urgency=medium

  * scmcadm: Fixed logging of ipv6 addresses
  * Removed old dummy parameter in service

 -- Felix Jacobi <felix.jacobi@stsbl.de>  Sun, 04 Feb 2018 16:46:36 +0100

stsbl-iserv-scmc (18.01.21-1) experimental; urgency=medium

  * Added universal file picker for upload
  * Fixed ScmcAdm and controller for uploaded files from file section
  * Improved file validation
  * Delete temp file in filesystem before upload
  * Updated copyright
  * Added lintian overrides
  * Improved hnadling of expired sessions and added skeleton for OATH support
  * Skip redirect handling for users without privilege
  * Fixed wrong use statement

 -- Felix Jacobi <felix.jacobi@stsbl.de>  Sun, 21 Jan 2018 23:20:14 +0100

stsbl-iserv-scmc (17.12.19-1) experimental; urgency=medium

  * Added license
  * scmcadm: Fixed ssh handling; Disabled not working chmod execution
  * Fixed missing room id change in PublicController
  * Added explicit sorting for room name in PublicController

 -- Felix Jacobi <felix.jacobi@stsbl.de>  Tue, 19 Dec 2017 08:36:24 +0100

stsbl-iserv-scmc (17.12.03-1) experimental; urgency=medium

  * Fixed wrong file permissions
  * Added missing dependency

 -- Felix Jacobi <felix.jacobi@stsbl.de>  Sun, 03 Dec 2017 00:14:58 +0100

stsbl-iserv-scmc (17.11.26-2) experimental; urgency=medium

  * Improved scmc_rooms constraints

 -- Felix Jacobi <felix.jacobi@stsbl.de>  Sun, 26 Nov 2017 17:16:23 +0100

stsbl-iserv-scmc (17.11.26-1) experimental; urgency=medium

  * Updated for new room id

 -- Felix Jacobi <felix.jacobi@stsbl.de>  Sun, 26 Nov 2017 16:53:12 +0100

stsbl-iserv-scmc (17.10.24-2) experimental; urgency=medium

  * Moved database use to scmcauthd.

 -- Felix Jacobi <felix.jacobi@stsbl.de>  Tue, 24 Oct 2017 08:11:39 +0200

stsbl-iserv-scmc (17.10.24-1) experimental; urgency=medium

  * Fixed reproducibility of iconf template.

 -- Felix Jacobi <felix.jacobi@stsbl.de>  Tue, 24 Oct 2017 08:08:19 +0200

stsbl-iserv-scmc (17.10.05-3) experimental; urgency=medium

  * Fixed php-cli dependency.

 -- Felix Jacobi <felix.jacobi@iserv.eu>  Thu, 05 Oct 2017 00:59:07 +0200

stsbl-iserv-scmc (17.10.05-2) experimental; urgency=medium

  * Fixed php-cli dependency.

 -- Felix Jacobi <felix.jacobi@iserv.eu>  Thu, 05 Oct 2017 00:29:53 +0200

stsbl-iserv-scmc (17.10.05-1) experimental; urgency=medium

  * copyright: Removed todo boilerplate.
  * Added php-cli dependency.
  * Fixed too long extended description.

 -- Felix Jacobi <felix.jacobi@iserv.eu>  Thu, 05 Oct 2017 00:28:15 +0200

stsbl-iserv-scmc (17.10.05-0) experimental; urgency=medium

  * apache: Fixed Let's Encrypt http-01 acme challenge for scmc vhost.
  * chkscmcapacheconf: Fixed custom config explaination in iconf template header.
  * chkscmcbindconf: Fixed CS
  * chkscmcbindconf: Fixed custom config explaination in iconf template header.

 -- Felix Jacobi <felix.jacobi@iserv.eu>  Thu, 05 Oct 2017 00:23:08 +0200

stsbl-iserv-scmc (17.07.12-2) experimental; urgency=medium

  [ Felix Jacobi ]
  * Fixed changelog.

 -- Stadtteilschule Blankenese <repository@stsbl.de>  Wed, 12 Jul 2017 22:33:59 +0200

stsbl-iserv-scmc (17.07.12-1) experimental; urgency=medium

  [ Felix Jacobi ]
  * Fixed build rules.

 -- Stadtteilschule Blankenese <repository@stsbl.de>  Wed, 12 Jul 2017 22:18:21 +0200

stsbl-iserv-scmc (17.07.12-0) experimental; urgency=medium

  [ Felix Jacobi ]
  * scmcadm: Fixed umlaut handling.
  * Fixed umlaut handling second time.
  * Fixed required on years choice. Thanks to Philip Reuter for testing!

  iserv: Mit dem aktuellen Update wurde der Fehler behoben, der dafür sorgte,
    dass man zwingend Jahrgänge vom dem Herunterladen auswählen musste. Der 
    Download funktioniert nun auch, wenn keine Jahrgänge gewählt sind, in 
    diesem Fall werden alle Jahrgänge heruntergeladen.

 -- Stadtteilschule Blankenese <repository@stsbl.de>  Wed, 12 Jul 2017 22:14:50 +0200

stsbl-iserv-scmc (17.07.11-1) experimental; urgency=medium

  [ Felix Jacobi ]
  * Fixed wrong route name.

 -- Stadtteilschule Blankenese <repository@stsbl.de>  Tue, 11 Jul 2017 01:49:21 +0200

stsbl-iserv-scmc (17.07.11-0) experimental; urgency=medium

  [ Felix Jacobi ]
  * Added missing l10n.
  * Fixed log module context.
  * Added missing bug fix.
  * Removed legacy db user map.
  * Fixed hardcoded usage of true in form. Thanks to Stephan Seidel for the bug report!
  * Added basic access frontend.
  * Fixed menu highlighting.; Improved ServerAdmin.
  * Updated l10n.
  * Added notice if no server is available.
  * Added help links.

  iserv: Das Modul enthält nun eine erste Version der Verlinkung zur
    Weboberfläche Zeugnisverwaltungsservers, der Link ist im Hauptmenü unter
    Organisation > Zeugnisnoteneingabe für die Benutzer mit dem Recht "Link
    zur Zeugnisverwaltung anzeigen" sichtbar. Dies sind stanardmäßig die
    Benutzer mit den Rollen Zeugnisverwalter, Administrator und Lehrer.
    Sollten Sie das Rollensystem von IServ 3 nicht verwenden, muss das Recht
    manuell der Gruppe/den Gruppen zugewiesen werden, in der sich die
    Lehrkräfte befinden. Der Link ist eine Beta-Funktion des Moduls, sollten
    Sie Verbesserungsvorschläge haben, melden Sie diese gerne dem Autor.

 -- Stadtteilschule Blankenese <repository@stsbl.de>  Tue, 11 Jul 2017 00:59:26 +0200

stsbl-iserv-scmc (17.07.09-2) experimental; urgency=medium

  [ Felix Jacobi ]
  * Added notice if no room is allowed.
  * Fork in newconf before executing to prevent long hangs.

 -- Stadtteilschule Blankenese <repository@stsbl.de>  Sun, 09 Jul 2017 03:36:27 +0200

stsbl-iserv-scmc (17.07.09-1) experimental; urgency=medium

  [ Felix Jacobi ]
  * Added dependency on libjson-perl.
  * Fixed typo.
  * Fixed placing of header options.
  * Disabled CSP for now.
  * Subscribe newhosts event.
  * Added missing x bit.
  * Fixed typo.

 -- Stadtteilschule Blankenese <repository@stsbl.de>  Sun, 09 Jul 2017 03:11:05 +0200

stsbl-iserv-scmc (17.07.09-0) experimental; urgency=medium

  [ Felix Jacobi ]
  * Updated build rules.
  * Added favicon to proxy.
  * Added fugue copyright.
  * Added basic room whitelist management.
  * RoomWhitelistAdmin: Fixed single item title.
  * Moved Scmc setter and getter to Trait.
  * Added support for whitelist configuration.

  iserv: Die neue Version unterhält nun Unterstützung für eine weiße Liste von
    Räumen. Geräte, dessen Räume sich nicht auf dieser Liste befinden, wird
    stattdessen eine "Zugriff verweigert"-Meldung angezeigt und darauf
    hingewiesen, von wo aus der Zugriff erlaubt ist. Diese Liste kann in IServ
    3 unter Verwaltung » Zeugnisverwaltung » Zulässige Räume bearbeitet
    werden. Außerdem wird nun eine verständlichere Fehlermeldung angezeigt,
    wenn der Zeugnisserver nicht erreichbar sein sollte.

 -- Stadtteilschule Blankenese <repository@stsbl.de>  Sun, 09 Jul 2017 00:43:56 +0200

stsbl-iserv-scmc (17.07.07-2) experimental; urgency=medium

  [ Felix Jacobi ]
  * Renamed virtual hosts from 00* to 01* to prevent wrong user homepage handling.
  * Adjusted apache config for Let's Encrypt.
  * Updated build rules.
  * Remove server config on package removal.

 -- Stadtteilschule Blankenese <repository@stsbl.de>  Fri, 07 Jul 2017 04:40:12 +0200

stsbl-iserv-scmc (17.07.07-1) experimental; urgency=medium

  [ Felix Jacobi ]
  * Added webroot and redirection config.

 -- Stadtteilschule Blankenese <repository@stsbl.de>  Fri, 07 Jul 2017 03:44:04 +0200

stsbl-iserv-scmc (17.07.07-0) experimental; urgency=medium

  [ Felix Jacobi ]
  * Added basic reverse proxy support.

 -- Stadtteilschule Blankenese <repository@stsbl.de>  Fri, 07 Jul 2017 03:16:07 +0200

stsbl-iserv-scmc (17.06.30-2) experimental; urgency=medium

  [ Felix Jacobi ]
  * Added missing l10n.

 -- Stadtteilschule Blankenese <repository@stsbl.de>  Fri, 30 Jun 2017 20:14:38 +0200

stsbl-iserv-scmc (17.06.30-1) experimental; urgency=medium

  [ Felix Jacobi ]
  * Added support for Stadtteilschule with Years from 5 to 10.
  * Updated l10n.

  iserv: Das Modul unterstützt nun auch die Jahrauswahl für Stadtteilschulen,
    die nur die Jahrgänge 5 bis 10 anbieten. Dies kann in der Konfiguration
    eingestellt werden, die Oberstufen-Jahrgänge werden dann entsprechend in
    der Jahresauswahl beim Download/Upload ausgeblendet.

 -- Stadtteilschule Blankenese <repository@stsbl.de>  Fri, 30 Jun 2017 20:10:17 +0200

stsbl-iserv-scmc (17.06.30-0) experimental; urgency=medium

  [ Felix Jacobi ]
  * Moved KernelResponse handling from ScmcAuth to own event subscriber class.
  * Updated l10n.
  * Force https also on EntryPoint.

 -- Stadtteilschule Blankenese <repository@stsbl.de>  Fri, 30 Jun 2017 20:02:32 +0200

stsbl-iserv-scmc (17.06.20-1) experimental; urgency=medium

  [ Felix Jacobi ]
  * SCMC.pm: Added missing Log.pm import.

 -- Stadtteilschule Blankenese <repository@stsbl.de>  Tue, 20 Jun 2017 15:39:02 +0200

stsbl-iserv-scmc (17.06.20-0) experimental; urgency=medium

  [ Felix Jacobi ]
  * legacy: Fixed master password migrating.
  * Moved empty master password checking to scmcadm.
  * Expire scmc login log older than six months.
  * Updated l10n.
  * Moved setting of user passwords to scmcadm.
  * Moved deleting of user passwords to scmcadm.
  * Fixed encoding of logs.
  * Database: Limit access to scmc_userpasswords web interface to SELECT.
  * Removed database table and user for legacy session management.
  * Added iservchk script to remove old session user and table.
  * Moved master password updating to scmcadm.
  * Dropped legacy session code.
  * Moved traits to Controller folder.
  * Removed legacy session commands.
  * Fixed empty master password handling.
  * Removed legacy session cleanup.
  * Replaced SecurityTrait with Sensio annotations.
  * Moved download logging to scmcadm
  * Fixed old security call.

 -- Stadtteilschule Blankenese <repository@stsbl.de>  Tue, 20 Jun 2017 15:07:50 +0200

stsbl-iserv-scmc (17.06.19-3) experimental; urgency=medium

  [ Felix Jacobi ]
  * postgresql: adding missing sed script.

 -- Stadtteilschule Blankenese <repository@stsbl.de>  Mon, 19 Jun 2017 22:17:53 +0200

stsbl-iserv-scmc (17.06.19-2) experimental; urgency=medium

  [ Felix Jacobi ]
  * Use standard passwd path.
  * iservchk: Fixed permissions of passwd files.

 -- Stadtteilschule Blankenese <repository@stsbl.de>  Mon, 19 Jun 2017 22:03:40 +0200

stsbl-iserv-scmc (17.06.19-1) experimental; urgency=medium

  [ Felix Jacobi ]
  * Added legacy scripts to upgrade old password system.

 -- Stadtteilschule Blankenese <repository@stsbl.de>  Mon, 19 Jun 2017 21:54:00 +0200

stsbl-iserv-scmc (17.06.19-0) experimental; urgency=medium

  [ Felix Jacobi ]
  * Fixed build deps.
  * Added missing iservcfg file.; Updated l10n.
  * Added support for scmcauthd.
  * Added upgrade script to convert passwd file.
  * Added dependency on scmcauthd.

 -- Stadtteilschule Blankenese <repository@stsbl.de>  Mon, 19 Jun 2017 21:46:22 +0200

stsbl-iserv-scmc (17.06.17-2) experimental; urgency=medium

  [ Felix Jacobi ]
  * Added missing iservchk script.

 -- Stadtteilschule Blankenese <repository@stsbl.de>  Sat, 17 Jun 2017 03:20:56 +0200

stsbl-iserv-scmc (17.06.17-1) experimental; urgency=medium

  [ Felix Jacobi ]
  * Added missing iservcfg l10n.

 -- Stadtteilschule Blankenese <repository@stsbl.de>  Sat, 17 Jun 2017 01:49:37 +0200

stsbl-iserv-scmc (17.06.17-0) experimental; urgency=medium

  [ Felix Jacobi ]
  * Updated install file.
  * Updated build deps and rules.
  * scmcadm: syntax fixes.
  * Implemented year-based restriction.
  * Fixed and improved deleting of temporary files.
  * Authentificate with clear password instead of password hash to prevent 
    attacks with stolen password hashes.
  * role definition: Fixed module name.
  * Added UploadSSHKeyAction.
  * scmcadm: Switched to qx for php sub process.
  * User password management: Reworked route generation.
  * Disabled unused status menu for now.
  * Added content for index action.
  * session login: Switched to hash_equals.
  * Implemented ScmcService.
  * ManagementController: Removed unused use statements.
  * Implemented ssh key uploading.
  * Fixed host editing.
  * Added safe key deleting after server deleting.
  * Implemented logging on server {adding,deleting,editing}.
  * Added DeleteSSHKeyAction.
  * ScmcAdmin service: Fixed usage with empty token attribute.
  * Switched server handling and key storing to nummeric ids.
  * Added help text to server form fields.
  * Improved form of UploadSSHKeyAction.
  * Added deletion of SSH keys.
  * Added extended domain validation.
  * Added custom message for account validation.
  * Updated l10n.
  * Removed h1 titles in management section.

  iserv: Die neue Version enthält diverse neue Funktionen: Zum einem können
    nun gezielt die Kurslisten einzelne Jahrgänge von den verbundenen Zeugnisservern 
    hoch- und heruntergeladen werden. Damit die Funktion ordnungsgemäß funktioniert, stellen
    Sie bitte unter iserv > Modul: Zeugnisverwlatungsconnector > Schultyp die
    Form Ihrer Schule (Gymnasium oder Stadtteilschule) ein. Als Administrator
    kann der SSH-Schlüssel, der für das Hoch- und Herunterladen benötigt wird, nun direkt 
    über die Oberfläche hinterlegt sowie gelöscht werden. Die Startseite der
    des Zeugnisverwalter-Bereiches enthält außerdem nun eine Überblick über
    die zehn zuletzt durchgeführten Download- und Upload-Aktionen.

 -- Stadtteilschule Blankenese <repository@stsbl.de>  Sat, 17 Jun 2017 01:39:58 +0200

stsbl-iserv-scmc (17.06.12-0) experimental; urgency=medium

  [ Felix Jacobi ]
  * Fixed l10n.
  * Added module specific menu.; Improved cs.; Replaced patch with sed script.
  * Added basic data downloading.
  * Improved logging.
  * Fixed login.
  * MasterPasswordCommand: Use password generation from PasswordUtil.
  * Added/Improved data cleanup.
  * Added cron job to expire scmc sessions.
  * Implemented basic data upload.
  * Enabled livesearch for group filter in user password management.
  * Added iservcfg menu to reset master password.
  * Fixed undefined subroutine in iservcfg script.
  * Fixed back title.
  * Added basic server management.
  * Added missing files.
  * Added required dependencies.
  * Added required dependency on libswitch-perl.
  * Improved iservcfg script.
  * Updated rules script.
  * Implemented up- and downloading with real server data.
  * Updated l10n.
  * Improved constraint of Server entity.
  * ServerAdmin: Added authorization check.
  * Updated l10n for iservchk.
  * Localized stsbl-scmc-reset-masterpassword.
  * stsbl-scmc-reset-masterpassword: Fixed answer handling.
  * Added missing l10n strings.

  iserv: Dieses Modul stellt eine einfach zu bedienende
    Verbindungsschnittstelle zu dem Zeugnisserver WZeugnis zur Verfügung.
    Derzeit wird das Hoch- und Herunterladen von Zeugnisdaten unterstützt. Das
    Modul ist nun auf diesem Server installiert, um es zu verwenden, müssen
    Master- und Passwort, sowie zu verwendende Server konfiguriert werden.
    Das Modul wird in den nächsten Wochen noch verbessert und unter anderem
    mit einem Reverse-Proxy für den Zugriff auf den Zeugnisserver erweitert.

 -- Stadtteilschule Blankenese <repository@stsbl.de>  Mon, 12 Jun 2017 05:22:35 +0200

stsbl-iserv-scmc (17.01.02-1) experimental; urgency=low

  * Initial release.

 -- Stadtteilschule Blankenese <repository@stsbl.de>  Mon, 02 Jan 2017 19:10:34 +0100
